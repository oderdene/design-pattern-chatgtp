“Æ—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª—ç—ç–¥ —Ç–∞–Ω—ã –∞—Å—É—É—Å–∞–Ω 16‚Äì20 –¥—É–≥–∞–∞—Ä –∞—Å—É—É–ª—Ç—É—É–¥–∞–¥ **–º–∞—à –Ω–∞—Ä–∏–π–Ω, –º–æ–Ω–≥–æ–ª —Ö—ç–ª—ç—ç—Ä**, —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –∞–Ω–≥–ª–∏ –Ω—ç—Ä —Ç–æ–º—å—ë–æ–≥ –Ω—å —Ö–∞–¥–≥–∞–ª–∞–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç–∞–π–ª–±–∞—Ä–ª–∞—è!

---

## 16. **Visitor –∑–∞–≥–≤–∞—Ä –∫–æ–¥—ã–Ω —É–Ω—à–∏–≥–¥–∞—Ö –±–∞–π–¥–∞–ª (readability), –∞—Ä—á–∏–ª–≥–∞–∞ (maintainability), —Ç—É—Ä—à–∏—Ö –±–æ–ª–æ–º–∂ (testability)-–¥ —Ö—ç—Ä—Ö—ç–Ω –Ω”©–ª”©”©–ª–¥”©–≥ –≤—ç?**

### ‚ûî –£–Ω—à–∏–≥–¥–∞—Ö –±–∞–π–¥–∞–ª (Readability):
- **–≠–µ—Ä—ç–≥ –Ω”©–ª”©”©:** –ë“Ø—Ö “Ø–π–ª–¥–ª“Ø“Ø–¥ (operation) –Ω—ç–≥ –≥–∞–∑–∞—Ä —Ç”©–≤–ª”©—Ä–¥”©–≥ —Ç—É–ª —è–º–∞—Ä “Ø–π–ª–¥—ç–ª —è–º–∞—Ä –æ–±—ä–µ–∫—Ç –¥—ç—ç—Ä —Ö–∏–π–≥–¥—ç–∂ –±–∞–π–≥–∞–∞–≥ —Ö—É—Ä–¥–∞–Ω –æ–π–ª–≥–æ—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.
- **–°”©—Ä”©–≥ –Ω”©–ª”©”©:** –•—ç—Ä—ç–≤ visitor –±–æ–ª–æ–Ω element-–∏–π–Ω —Ç”©—Ä”©–ª –æ–ª–æ–Ω –±–∞–π–≤–∞–ª —ç—Ö–ª—ç—ç–¥ –±“Ø—Ç—Ü–∏–π–≥ –æ–π–ª–≥–æ—Ö–æ–¥ —Ç”©–≤”©–≥—Ç—ç–π –±–æ–ª–∂ –±–æ–ª–Ω–æ.

### ‚ûî –ê—Ä—á–∏–ª–≥–∞–∞ (Maintainability):
- **–≠–µ—Ä—ç–≥ –Ω”©–ª”©”©:** –®–∏–Ω—ç “Ø–π–ª–¥—ç–ª –Ω—ç–º—ç—Ö—ç–¥ –∑”©–≤—Ö”©–Ω —à–∏–Ω—ç visitor –Ω—ç–º—ç—Ö—ç–¥ —Ö–∞–Ω–≥–∞–ª—Ç—Ç–∞–π. –ë—É—Å–∞–¥ –∫–ª–∞—Å—Å—É—É–¥—ã–≥ ”©”©—Ä—á–ª”©—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞–≥“Ø–π.
- **–°”©—Ä”©–≥ –Ω”©–ª”©”©:** –•—ç—Ä—ç–≤ —à–∏–Ω—ç —ç–ª–µ–º–µ–Ω—Ç –Ω—ç–º–±—ç–ª –±“Ø—Ö visitor-—É—É–¥—ã–≥ —à–∏–Ω—ç—á–ª—ç—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π –±–æ–ª–¥–æ–≥, —ç–Ω—ç –Ω—å –∞—Ä—á–∏–ª–≥–∞–∞–≥ —Ç”©–≤”©–≥—Ç—ç–π –±–æ–ª–≥–æ–Ω–æ.

### ‚ûî –¢—É—Ä—à–∏—Ö –±–æ–ª–æ–º–∂ (Testability):
- **”®–Ω–¥”©—Ä:** Visitor –∫–ª–∞—Å—Å —Ç—É—Å–¥–∞–∞ –±–∞–π–¥–∞–≥ —Ç—É–ª —Ç—É—Å–≥–∞–∞—Ä–ª–∞–∂ (in isolation) —Ö—è–ª–±–∞—Ä unit test –±–∏—á–∏—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.
- **Mock —Ö–∏–π—Ö—ç–¥ –∞–º–∞—Ä:** Mock visitor —ç—Å–≤—ç–ª mock element –∞—à–∏–≥–ª–∞–Ω —Ö”©–Ω–¥–ª”©–Ω —Ç–µ—Å—Ç —Ö–∏–π—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.

---

## 17. **Visitor –∑–∞–≥–≤–∞—Ä performance (–≥“Ø–π—Ü—ç—Ç–≥—ç–ª) –±–æ–ª–æ–Ω overhead “Ø“Ø—Å–≥—ç–¥—ç–≥ “Ø“Ø?**

–¢–∏–π–º —ç—ç, —Ç–æ–¥–æ—Ä—Ö–æ–π —Ö—ç–º–∂—ç—ç–Ω–¥ **performance** –∞—Å—É—É–¥–∞–ª “Ø“Ø—Å–≥—ç–∂ –±–æ–ª–Ω–æ.

### ‚ûî –Ø–∞–≥–∞–∞–¥ performance-–¥ –Ω”©–ª”©”©–ª–¥”©–≥ –≤—ç?
- **Double Dispatch:** Element –Ω—å visitor-–≥ –¥—É—É–¥–∞–∂, visitor –Ω—å –±—É—Ü–∞–∞–≥–∞–∞–¥ —ç–ª–µ–º–µ–Ω—Ç –¥—ç—ç—Ä—ç—ç —Ç–æ—Ö–∏—Ä–æ—Ö “Ø–π–ª–¥–ª–∏–π–≥ —Ö–∏–π–¥—ç–≥. –≠–Ω—ç —Ö–æ—ë—Ä —à–∞—Ç–ª–∞–ª—ã–Ω method call –Ω—ç–º—ç–≥–¥–¥—ç–≥.
- **Runtime –¥—ç—ç—Ä —Ç”©—Ä”©–ª —à–∞–ª–≥–∞—Ö:** –ó–∞—Ä–∏–º —Ç–æ—Ö–∏–æ–ª–¥–æ–ª–¥ runtime –¥—ç—ç—Ä –æ–ª–æ–Ω —Ç”©—Ä–ª–∏–π–Ω visitor —ç—Å–≤—ç–ª element —è–ª–≥–∞—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞ –≥–∞—Ä–¥–∞–≥.

### ‚ûî Overhead —Ö—ç—Ä –∏—Ö –≤—ç?
- –ï—Ä”©–Ω—Ö–∏–π–¥”©”© —ç–Ω—ç overhead –Ω—å **–±“Ø—Ä—ç–Ω –æ–±—ä–µ–∫—Ç –≥–∞—Ä–∞–∞—Ä —É–¥–∏—Ä–¥–¥–∞–≥ —Å–∏—Å—Ç–µ–º** (–≥–∞—Ä–∞–∞—Ä –±–∏—á—Å—ç–Ω AST traverser –≥—ç—Ö –º—ç—Ç) –¥—ç—ç—Ä –ª –º—ç–¥—ç–≥–¥—ç—Ö“Ø–π—Ü –±–æ–ª–¥–æ–≥.
- –ò—Ö—ç–Ω—Ö –±–∏–∑–Ω–µ—Å —Å–∏—Å—Ç–µ–º, —Ö—ç—Ä—ç–≥–ª—ç—ç–Ω–∏–π –∞–ø–ø–ª–∏–∫–µ–π—à–Ω“Ø“Ø–¥ –¥—ç—ç—Ä –ø—Ä–∞–∫—Ç–∏–∫—Ç –±–∞—Ä–∞–≥ –º—ç–¥—ç–≥–¥—ç—Ö–≥“Ø–π.

---

## 18. **Visitor –∑–∞–≥–≤–∞—Ä –æ–ª–æ–Ω-thread —ç—Å–≤—ç–ª –∑—ç—Ä—ç–≥—Ü—ç—ç –æ—Ä—á–∏–Ω–¥ (concurrent, multi-threaded environments) —Ö—ç—Ä—Ö—ç–Ω –∞–∂–∏–ª–ª–∞–¥–∞–≥ –≤—ç?**

Visitor –∑–∞–≥–≤–∞—Ä ”©”©—Ä”©”© **thread-safe** –±–∏—à.

### ‚ûî –Ø–º–∞—Ä –∞—Å—É—É–¥–∞–ª “Ø“Ø—Å—ç–∂ –±–æ–ª–æ—Ö –≤—ç?
- –•—ç—Ä—ç–≤ –Ω—ç–≥ visitor-–≥ —Ö—ç–¥ —Ö—ç–¥—ç–Ω thread –∑—ç—Ä—ç–≥ —Ö—É–≤–∞–∞–ª—Ü–∞–∂ –∞—à–∏–≥–ª–∞–≤–∞–ª –¥–æ—Ç–æ–æ–¥ —Ç”©–ª”©–≤ (state) –∞–ª–¥–∞–≥–¥–∞–∂ –º–∞–≥–∞–¥–≥“Ø–π.
- Element structure-–≥ –∑—ç—Ä—ç–≥ —Ö—ç–¥—ç–Ω thread-–∞–∞—Ä ”©”©—Ä—á–ª”©—Ö (add, remove —ç–ª–µ–º–µ–Ω—Ç –≥—ç—Ö –º—ç—Ç) “Ø–µ–¥ —É–Ω–∞–ª—Ç (race condition) “Ø“Ø—Å—ç–∂ –±–æ–ª–Ω–æ.

### ‚ûî –Ø–∞–∂ —à–∏–π–¥–¥—ç–≥ –≤—ç?
- **Visitor-–∏–π–≥ —Å—Ç–∞—Ç–∏–∫ (stateless) –±–∞–π–ª–≥–∞—Ö:** –Ø–º–∞—Ä –Ω—ç–≥—ç–Ω –¥–æ—Ç–æ–æ–¥ —Ç”©–ª”©–≤ —Ö–∞–¥–≥–∞–ª–¥–∞–≥–≥“Ø–π –±–∞–π—Ö.
- **Thread —Ç—É—Å –±“Ø—Ä–¥ ”©”©—Ä visitor instance “Ø“Ø—Å–≥—ç—Ö:** –ó–æ—Ö–∏—É–ª–∞—Ö–¥–∞–∞ visitor-–≥ thread —Ç—É—Å –±“Ø—Ä–¥ —Ç—É—Å–≥–∞–∞—Ä–ª–∞—Ö.
- **Synchronization —Ö—ç—Ä—ç–≥–ª—ç—Ö:** –Ø–ª–∞–Ω–≥—É—è–∞ —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥—ç–¥ —Ö–∞–Ω–¥–∞—Ö “Ø–µ–¥ `lock`, `mutex` –∑—ç—Ä—ç–≥ —Ö–∞–º–≥–∞–∞–ª–∞–ª—Ç –∞—à–∏–≥–ª–∞—Ö.

---

## 19. **Visitor –∑–∞–≥–≤–∞—Ä —à–∞–∞—Ä–¥–ª–∞–≥—É—É–¥ ”©”©—Ä—á–ª”©–≥–¥”©—Ö “Ø–µ–¥ —Ö—ç—Ä—Ö—ç–Ω —Ö—É–≤—å—Å–∞–Ω ”©”©—Ä—á–ª”©–≥–¥–¥”©–≥ –≤—ç?**

### ‚ûî –•—ç—Ä—ç–≤ —à–∏–Ω—ç “Ø–π–ª–¥—ç–ª –Ω—ç–º—ç–≥–¥—Å—ç–Ω –±–æ–ª:
- **–®–∏–Ω—ç Visitor –∫–ª–∞—Å—Å** –Ω—ç–º—ç—Ö—ç–¥ –ª —Ö–∞–Ω–≥–∞–ª—Ç—Ç–∞–π.
- –ñ–∏—à—ç—ç: –¢–∞—Ç–≤–∞—Ä—ã–Ω —à–∏–Ω—ç —Ç”©—Ä–ª–∏–π–Ω —Ç–æ–æ—Ü–æ–æ –Ω—ç–º—ç—Ö—ç–¥ —à–∏–Ω—ç visitor –Ω—ç–º–Ω—ç.

### ‚ûî –•—ç—Ä—ç–≤ —à–∏–Ω—ç —ç–ª–µ–º–µ–Ω—Ç (—à–∏–Ω—ç —Ç”©—Ä–ª–∏–π–Ω –æ–±—ä–µ–∫—Ç) –Ω—ç–º—ç–≥–¥—Å—ç–Ω –±–æ–ª:
- **–ë“Ø—Ö Visitor –∫–ª–∞—Å—Å—É—É–¥—ã–≥ —à–∏–Ω—ç—á–ª—ç—Ö —Ö—ç—Ä—ç–≥ –≥–∞—Ä–Ω–∞.**
- –Ø–∞–≥–∞–∞–¥ –≥—ç–≤—ç–ª –±“Ø—Ö visitor-—É—É–¥ —à–∏–Ω—ç —ç–ª–µ–º–µ–Ω—Ç —Ç”©—Ä–ª–∏–π–≥ —Ç–∞–Ω—å–∂, –¥—ç—ç—Ä –Ω—å “Ø–π–ª–¥—ç–ª —Ö–∏–π—Ö–∏–π–≥ –¥—ç–º–∂–∏—Ö —ë—Å—Ç–æ–π –±–æ–ª–Ω–æ.
  
### ‚ûî –ò–π–º—ç—ç—Å:
- **–®–∞–∞—Ä–¥–ª–∞–≥–∞ —Ç–æ–≥—Ç–≤–æ—Ä—Ç–æ–π (elements –±–∞–≥–∞ ”©”©—Ä—á–ª”©–≥–¥–¥”©–≥)** —Å–∏—Å—Ç–µ–º–¥ visitor –º–∞—à —Å–∞–π–Ω —Ç–æ—Ö–∏—Ä–Ω–æ.
- **–≠–ª–µ–º–µ–Ω—Ç–∏–π–Ω —Ç”©—Ä”©–ª –±–∞–π–Ω–≥–∞ –Ω—ç–º—ç–≥–¥–¥—ç–≥** –±–æ–ª visitor –∞—à–∏–≥–ª–∞—Ö –Ω—å —Ç”©–≤”©–≥—Ç—ç–π –±–æ–ª–∂ –º–∞–≥–∞–¥–≥“Ø–π.

---

## 20. **Visitor –∑–∞–≥–≤–∞—Ä—ã–≥ –∞—à–∏–≥–ª–∞—Ö–¥–∞–∞ –≥–∞—Ä–≥–∞–¥–∞–≥ –Ω–∏–π—Ç–ª—ç–≥ –∞–ª–¥–∞–∞ (common pitfalls):**

1. **–ë—É—Ä—É—É “Ø–µ–¥ visitor –∞—à–∏–≥–ª–∞—Ö:**
   - –ë–∞–≥–∞ —Ö—ç–º–∂—ç—ç–Ω–∏–π, —ç–Ω–≥–∏–π–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞—Ç–∞–π —Å–∏—Å—Ç–µ–º–¥ —Ö—ç—Ç—ç—Ä—Ö–∏–π —Ç–æ–º –±“Ø—Ç—ç—Ü “Ø“Ø—Å–≥—ç—ç–¥ –∏–ª“Ø“Ø —Ç”©–≤”©–≥—Ç—ç–π –±–æ–ª–≥–æ—á–∏—Ö–¥–æ–≥.

2. **Element-“Ø“Ø–¥–∏–π–≥ –±–∞–π–Ω–≥–∞ ”©”©—Ä—á–∏–ª–¥”©–≥ —Å–∏—Å—Ç–µ–º–¥ —Ö—ç—Ä—ç–≥–ª—ç—Ö:**
   - –®–∏–Ω—ç —ç–ª–µ–º–µ–Ω—Ç –Ω—ç–º—ç–≥–¥—ç—Ö –±“Ø—Ä–¥ –±“Ø—Ö visitor-–≥ –∑–∞—Å–∞—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π —É—á—Ä–∞–∞—Å –∞—Ä—á–∏–ª–≥–∞–∞ —Ö“Ø–Ω–¥—Ä—ç–Ω—ç.

3. **Visitor –∫–ª–∞—Å—Å—É—É–¥—ã–≥ —Ö—ç—Ç —Ç–æ–º –±–æ–ª–≥–æ—Ö:**
   - –ë“Ø—Ö —Ç”©—Ä–ª–∏–π–Ω “Ø–π–ª–¥–ª–∏–π–≥ –Ω—ç–≥ visitor-–¥ —Ö–∏–π–∂, –∫–æ–¥—ã–≥ —Ö—ç—Ç—ç—Ä—Ö–∏–π –∏—Ö —Ç”©–≤–ª”©—Ä“Ø“Ø–ª–±—ç–ª —É–Ω—à–∏–≥–¥–∞—Ö–≥“Ø–π, –æ–π–ª–≥–æ–º–∂–≥“Ø–π –±–æ–ª–¥–æ–≥.

4. **Stateful visitor —Ö—ç—Ä—ç–≥–ª—ç—Ö–≥“Ø–π –∞–Ω—Ö–∞–∞—Ä–∞—Ö–≥“Ø–π –±–∞–π—Ö:**
   - –î–æ—Ç–æ–æ–¥ —Ç”©–ª”©–≤ (state) —Ö–∞–¥–≥–∞–ª–¥–∞–≥ visitor –æ–ª–æ–Ω thread –¥—ç—ç—Ä –∞—à–∏–≥–ª–∞—Ö “Ø–µ–¥ deadlock, race condition “Ø“Ø—Å–≥—ç–∂ –±–æ–ª–¥–æ–≥.

5. **–ù—ç—Ä —Ç–æ–º—å—ë–æ –º—É—É —Å–æ–Ω–≥–æ—Ö:**
   - `visitConcreteElementA()`, `visitConcreteElementB()` –≥—ç—Ö –º—ç—Ç —Ç–æ–¥–æ—Ä—Ö–æ–π–≥“Ø–π –Ω—ç—Ä—Ç—ç–π –±–æ–ª–≥–æ—Ö –Ω—å –æ–π–ª–≥–æ–ª—Ç –º—É—É—Ç–∞–π –±–æ–ª–≥–æ–¥–æ–≥. –Ø–≥ —é—É —Ö–∏–π–∂ –±–∞–π–≥–∞–∞ method –≤—ç –≥—ç–¥–≥–∏–π–≥ –Ω—ç—Ä–Ω—ç—ç—Å –Ω—å —Ç–æ–¥–æ—Ä—Ö–æ–π —Ö–∞—Ä–∞–≥–¥—É—É–ª–∂ ”©–≥”©—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π.

---

# üåü –î“Ø–≥–Ω—ç–ª—Ç:
Visitor –∑–∞–≥–≤–∞—Ä –±–æ–ª **–∞–≥—É—É —Ö“Ø—á—Ç—ç–π**, –≥—ç—Ö–¥—ç—ç **–∑”©–≤ –æ—Ä—á–∏–Ω–¥ –∑”©–≤ —Ö—ç—Ä—ç–≥–ª—ç–≤—ç–ª** –ª –∂–∏–Ω—Ö—ç–Ω—ç –¥–∞–≤—É—É —Ç–∞–ª –Ω—å –≥–∞—Ä–¥–∞–≥.  
–ë—É—Ä—É—É —Ö—ç—Ä—ç–≥–ª—ç–≤—ç–ª –º–∞—à —Ç”©–≤”©–≥—Ç—ç–π, —Ö—ç—Ü“Ø“Ø –∫–æ–¥ “Ø“Ø—Å–≥—ç–∂ –±–æ–ª–¥–æ–≥!

---

üõ† –•—ç—Ä–≤—ç—ç —Ç–∞ —Ö“Ø—Å–≤—ç–ª –¥–∞—Ä–∞–∞–≥–∏–π–Ω —à–∞—Ç–∞–Ω–¥:
- **Visitor Pattern-—ã–Ω –∞–ª–¥–∞–∞ –∑–∞–π–ª—Å—Ö–∏–π—Å—ç–Ω –∑–æ—Ö–∏–æ–º–∂–ª–æ—Ö –∞—Ä–≥–∞**  
- **Visitor Pattern-—ã–≥ concurrency friendly –±–æ–ª–≥–æ—Ö —Ç–µ—Ö–Ω–∏–∫–∏–π–Ω –Ω–∞—Ä–∏–π–≤—á–∏–ª—Å–∞–Ω –∂–∏—à—ç—ç**
- **Visitor + Composite + Strategy-—Ç–∞–π —Ö–æ—Å–æ–ª—Å–æ–Ω –±–æ–¥–∏—Ç —Ç”©—Å”©–ª**

–≥—ç—Å—ç–Ω –∑“Ø–π–ª—Å–∏–π–≥ —Ö–∏–π–∂ ”©–≥”©—Ö”©–¥ –±—ç–ª—ç–Ω –±–∞–π–Ω–∞!

üëâ –Ø–≥ –æ–¥–æ–æ –∞–ª—å —á–∏–≥–ª—ç–ª–¥ –≥“Ø–Ω–∑–≥–∏–π—Ä“Ø“Ø–ª—ç–Ω –æ—Ä–º–æ–æ—Ä –±–∞–π–Ω–∞ –≤—ç? üöÄ (–∂–∏—à—ç—ç –Ω—å, `Concurrency-—Ç–∞–π Visitor`, —ç—Å–≤—ç–ª `Real Project Level Composite + Visitor`)  
–•—ç–ª—ç—ç—Ä—ç–π! üî•